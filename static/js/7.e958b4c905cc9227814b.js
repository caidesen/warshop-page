webpackJsonp([7],{gIRe:function(e,t,s){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=s("Tg7E"),r=s("SYO7"),n={name:"updateUserInfo",data:function(){return{username:this.$store.state.user.username,usernameState:"",qqNum:this.$store.state.user.qqNum,description:this.$store.state.user.description,oldPassword:""}},created:function(){},methods:{checkUsername:function(){var e=this;this.username.trim().length>=2&&this.axios({url:"/auth/checkUsername",method:"post",params:{username:this.username.trim()}}).then(function(){e.usernameState="success"}).catch(function(t){e.usernameState="warning",Object(r.a)(t)})},update:function(){var e=this;this.axios({url:"/auth/user",method:"put",headers:{token:this.$store.state.user.token},params:{username:this.username.trim(),qqNum:this.qqNum.trim(),description:this.description,password:this.oldPassword}}).then(function(){e.$router.go(-1),localStorage.clear();var t={username:e.username,password:e.oldPassword};e.$store.dispatch("user/login",t),Object(a.Toast)({message:"修改成功",iconClass:"icon icon-success"})}).catch(function(e){Object(r.a)(e)})}}},o={render:function(){var e=this,t=e.$createElement,s=e._self._c||t;return s("div",{attrs:{id:"updateUserInfo"}},[s("mt-field",{attrs:{label:"用户名",placeholder:"请输入用户名",state:e.usernameState},model:{value:e.username,callback:function(t){e.username=t},expression:"username"}},[s("button",{on:{click:e.checkUsername}},[e._v("检查")])]),e._v(" "),s("mt-field",{attrs:{label:"qq号",placeholder:"请输入QQ号"},model:{value:e.qqNum,callback:function(t){e.qqNum=t},expression:"qqNum"}}),e._v(" "),s("mt-field",{attrs:{label:"自我介绍",placeholder:"自我介绍",type:"textarea",rows:"3"},model:{value:e.description,callback:function(t){e.description=t},expression:"description"}}),e._v(" "),s("mt-field",{attrs:{label:"密码",placeholder:"请输入旧密码",type:"password"},model:{value:e.oldPassword,callback:function(t){e.oldPassword=t},expression:"oldPassword"}}),e._v(" "),s("mt-button",{attrs:{size:"large"},on:{click:e.update}},[e._v("确认修改")])],1)},staticRenderFns:[]};var i=s("VU/8")(n,o,!1,function(e){s("iIwH")},"data-v-2de456f5",null);t.default=i.exports},iIwH:function(e,t){}});